# Studies Cpp

[CMake tutorial](https://cmake.org/cmake/help/latest/guide/tutorial/index.html)

[Learn Cpp](https://www.learncpp.com/)

## Study cases

1. [t_cpp20](./t_cpp20/main.cpp): the first test case which is used for testing C++20 compiler

1. [t_linkage](./t_linkage/main.cpp): internal linkage vs. external linkage, printing out variables address to check differences

1. [t_global_const](./t_global_const/main.cpp): C++17 `inline constexpr`

1. [t_constexpr_consteval_fn](./t_constexpr_consteval_fn/main.cpp): constexpr & consteval functions

1. [t_fn_template](./t_fn_template/main.cpp): function template

1. [t_ref_ptr](./t_ref_ptr/main.cpp): reference & pointer

1. [t_struct_size](./t_struct_size/main.cpp): struct size & deduction guild

1. [t_fn_ptr](./t_fn_ptr/main.cpp): function pointer

1. [t_algo](./t_algo/main.cpp): `#include <algorithm>` standard library usage

1. [t_class](./t_class/main.cpp): class declaration. Non-reusable class under its usage file; otherwise, split into `.h` and `.cpp` file (one for declaration and one for implementation)

1. [t_friend_fn_cls](./t_friend_fn_cls/main.cpp): `friend` keyword can be used on a class or a member function. The former one means granting all members' accessibility; the latter one means granting specified member function the accessibility

1. [t_composition](./t_composition/main.cpp)

1. [t_aggregation](./t_aggregation/main.cpp)

1. [t_association](./t_association/main.cpp)

1. [t_timing](./t_timing/main.cpp): a simple helper tool to collect elapsed time

1. [t_multiple_inheritance](./t_multiple_inheritance/main.cpp): differences among `public`/`protected`/`private` and the usage of mixin

1. [t_virtual_covariant_rtn](./t_virtual_covariant_rtn/main.cpp): virtual function's covariant return type

1. [t_virtual_quiz](./t_virtual_quiz/main.cpp): class inheritance with virtual function and operation<<

## Vscode settings

- C++ format in `settings.json`:

  ```json
  "clang-format.executable": "/opt/homebrew/bin/clang-format",
  "clang-format.style": "google",
  "clang-format.language.c.enable": true,
  "[c]": {
    "editor.defaultFormatter": "xaver.clang-format",
    "editor.wordBasedSuggestions": false,
    "editor.suggest.insertMode": "replace",
    "editor.semanticHighlighting.enabled": true
  }
  ```

  Note "clang-format.executable" directory can be found by `whereis clang-format`.

- Vscode user setting in order to solve [pointer-alignment issue](https://stackoverflow.com/a/52200544): `"C_Cpp.clang_format_fallbackStyle": "{ ColumnLimit: 120, PointerAlignment: Left}"`.

- Vscode setting `.vscode/tasks.json` (auto generated by vscode, but should be manually modified, [reference](https://www.cnblogs.com/gundam00/p/13447602.html))

  - Mac, for each task's `args`:

    ```json
    "args": [
      "-std=c++2a",
      "-fcolor-diagnostics",
      "-fansi-escape-codes",
      "-g",
      "${workspaceFolder}/t_cpp20/*.cpp",
      "-o",
      "${fileDirname}/${fileBasenameNoExtension}"
    ]
    ```

  - Ubuntu, for each task's `args`:

    ```json
    "args": [
      "-std=c++2a",
      "-fdiagnostics-color=always",
      "-g",
      "${workspaceFolder}/t_cpp20/*.cpp",
      "-o",
      "${fileDirname}/${fileBasenameNoExtension}"
    ]
    ```

  - Note, `-std=c++2a` means to use C++20 to compile; `"${workspaceFolder}/t_cpp20/*.cpp"` means to scan all the .cpp file under `/t_cpp20` directory.

- Each time adding an executable, add a new task as well.

- Vscode intellisense `.vscode/c_cpp_properties.json`

  - Ubuntu:

    ```json
    "configurations": [
      {
        ...
        "configurationProvider": "ms-vscode.makefile-tools",
        "compileCommands": "${workspaceFolder}/build/compile_commands.json"
      }
    ]
    ```

## Todo

- [catch2 test framework](https://github.com/catchorg/Catch2)
- [vscode with googletest](https://computingonplains.wordpress.com/building-c-applications-with-visual-studio-code-unit-testing-with-googletest/)
- [upgrade ubuntu version on wsl](https://dev.to/equiman/upgrade-ubuntu-version-on-wsl-3h10)
- [discussion on googletest with CMake](https://stackoverflow.com/questions/62910867/how-to-run-tests-and-debug-google-test-project-in-vs-code)
